<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
      <title>Test HTML - using JSON objects</title>
      <script src='/js/golfing.js'></script>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
      <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Roboto:Light300">
      <link rel="stylesheet" type="text/css" href="/css/style.css">
      <link href='https://fonts.googleapis.com/css?family=Roboto:300italic|Montserrat:400,700' rel='stylesheet' type='text/css'>
      <link href='https://fonts.googleapis.com/css?family=Roboto:100italic' rel='stylesheet' type='text/css'>
  </head>
  <body>
    <div class="navwrap">
      <div class="nav">
       <li><a href="javascript:loadUsers()">USERS</a></li>
       <li><a href="#">ADD A SCORE</a></li>
       <li><a href="#">HOW</a></li>
       <li><a href="#">PRODUCTION</a></li>
       <li><a href="golfer.html">GAME</a></li>
     </div>
    </div>

  <div class="users">
    <div id="users">
    <!-- <p id="users"></p> -->
    </div>
  </div>

    <div class="mainstuff">
        <h1> TRAC GOLF <h1>

    </div>
  <div class="wrap">
    <img src="/images/searchicon.png" alt="search" id="search">
  <!-- <div id="container"> <h1> YOYOYO <h1> </div> -->
</div>
<div class="newscore">
 <div class="username">
  <label class="checkboxlabel" for="username"></label>
  <select name="username" id="username">
    <option selected="selected"> USER </option>
    <option value=25>Andrew Cherry</option>
    <option value=26>Mikhail Vinogradov</option>
    <option value=27>Ricardo Vazquez</option>
  </select>
  </div>

 <label class="checkboxlabel" for="scores"></label>
 <select name="country" id="score">
   <option selected="selected"> NEW SCORE </option>
   <option value=2>72</option>
   <option value=3>73</option><option value=4>74</option><option value=5>75</option>
   <option value=6>76</option><option value=7>77</option><option value=8>78</option>
   <option value=9>79</option><option value=10>80</option><option value=11>81</option>
   <option value=12>82</option><option value=13>83</option><option value=14>84</option>
   <option value=15>85</option><option value=16>86</option><option value=16>87</option>
   <option value=1>88</option><option value=2>89</option><option value=3>90</option>
   <option value=4>91</option><option value=5>92</option><option value=6>93</option>
   <option value=7>94</option><option value=8>95</option><option value=9>96</option>
   <option value=10>97</option><option value=11>98</option><option value=12>99</option>
   <option value=13>100</option><option value=14>101</option><option value=15>102</option>
   <option value=16>103</option>
 </select>


  <label class="checkboxlabel" for="course"></label>
  <select name="course" id="course">
    <option selected="selected"> Golf Course </option>
    <option value=1>Grey Silo</option>
    <option value=1>Pebble Beach</option>
  </select>



<div class="date">
  <label class="checkboxlabel" for="date"></label>
  <select name="dateit" id="date">
    <option selected="selected"> DATE </option>
    <option value=25>2015/09/20</option>
    <option value=26>2015/09/21</option>
    <option value=27>2015/09/22</option>
  </select>
  </div>
  <div class="button">
    <button type="button" onclick="addNewScore()">Add Score</button>
  </div>
</div>
<script>
    function loadUsers() {
      $("#users").empty();
      jQuery.ajax({ type: "POST", url: '/php/golfdb.php', dataType: 'json',
         data: {functionname: 'getUsers', arguments: [1]},
         success: function (obj, textstatus) {
              if( !('error' in obj) ) {
                for (var i = 0; i < obj.users.length; i++) {
                     $user = obj.users[i];
                     console.log(JSON.stringify(obj));
                     //console.log(obj.users[i].email);
                     $userText = $user.name + "_____________" + "        Handicap:         " + $user.handicap;
                     $("#users").append("<p>" + $userText + "</p>");
                }
              }
              else {
                  console.log(obj.error);
              }
         }
      });
    }

    var tracheading = document.querySelector('.mainstuff');
    var image = document.querySelector('.wrap');
    function respondToClick() {
    	tracheading.className = "invisible";
      image.className = "invisible";
    }

    function addScore($username, $coursename, $dateplayed, $rawscore, $netscore) {
      // (1, 1, "2015-08-20", 0, 90, 20.5)
      jQuery.ajax({ type: "POST", url: '/php/golfdb.php', dataType: 'json',
         data: {functionname: 'addScore', arguments: [$username, $coursename, $dateplayed, $rawscore, $netscore, 0]},
         success: function (obj, textstatus) {
            console.log(textstatus);
         }
      });
    }

    function addNewScore() {
      $username = $('#username').find(":selected").text();
      $coursename = $('#course').find(":selected").text();
      $dateplayed = $('#date').find(":selected").text();
      $rawscore = $('#score').find(":selected").text();
      $netscore = $('#score').find(":selected").text();

      addScore($username, $coursename, $dateplayed, $rawscore, $netscore);
      loadUsers();
    }
</script>

  </body>
</html>
